<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Drug Synergy Studio</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                        </svg>
                        <div>
                            <h1>Admin Panel</h1>
                            <p>Database Management</p>
                        </div>
                    </div>
                    <a href="index.html" class="btn-secondary">View User Interface</a>
                </div>
            </div>
        </header>

        <section class="container" style="margin-top: 3rem;">
            <div class="card">
                <div class="card-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 16V8a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z"/>
                    </svg>
                    <h3>Upload Database CSV</h3>
                </div>

                <div class="alert alert-info">
                    <strong>Required CSV Format:</strong>
                    <p>Columns: <code>drug_1, drug_2, cell_line, bliss, loewe, hsa, zip, bliss_uncertainty, loewe_uncertainty, hsa_uncertainty, zip_uncertainty</code></p>
                    <p style="margin-top: 0.5rem; font-size: 0.875rem; opacity: 0.8;">
                        Example: Everolimus,Capivasertib,A549,0.42,0.38,0.51,0.45,0.05,0.04,0.06,0.05
                    </p>
                </div>

                <div class="upload-methods">
                    <div class="upload-method">
                        <h4>Method 1: Upload CSV File</h4>
                        <input type="file" id="csv-file" accept=".csv" onchange="handleFileUpload(event)">
                        <label for="csv-file" class="btn-primary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                            Choose CSV File
                        </label>
                    </div>

                    <div class="upload-method">
                        <h4>Method 2: Paste CSV Content</h4>
                        <textarea id="csv-text" placeholder="Paste your CSV content here..." rows="10"></textarea>
                        <button class="btn-primary" onclick="loadFromText()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M21 16V8a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z"/>
                            </svg>
                            Load Database
                        </button>
                    </div>
                </div>

                <div id="upload-status" class="upload-status" style="display: none;"></div>

                <div id="data-preview" style="display: none; margin-top: 2rem;">
                    <h4>Database Preview</h4>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="total-rows">0</div>
                            <div class="stat-label">Total Entries</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="unique-drugs">0</div>
                            <div class="stat-label">Unique Drugs</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="unique-cells">0</div>
                            <div class="stat-label">Cell Lines</div>
                        </div>
                    </div>
                    <div class="table-container" style="margin-top: 1.5rem;">
                        <table id="preview-table">
                            <thead>
                                <tr>
                                    <th>Drug 1</th>
                                    <th>Drug 2</th>
                                    <th>Cell Line</th>
                                    <th>Bliss</th>
                                    <th>Loewe</th>
                                    <th>HSA</th>
                                    <th>ZIP</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="admin.js"></script>
</body>
</html>